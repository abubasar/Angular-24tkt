<div class="container-fluid dsb1" style="margin-top: 79px;background: #0B223C;padding-bottom: 17px;">
  <form [formGroup]="searchForm" (ngSubmit)="searchFlight()">
    <div class="row dsb2">
      <div class="col-lg-1">
        <label>Type Here</label>
        <select class="form-control" formControlName="JourneyType">
          <option *ngFor="let c of journeyTypes" [ngValue]="c.JourneyType">{{c.name}}</option>
        </select>
      </div>
      <div formArrayName="OriginDestinationInformation" class="col-lg-7">
        <ng-container *ngFor="let mySearchForm of searchForm.get('OriginDestinationInformation').controls; let i=index">
          <div [formGroupName]="i" class="row">
            <div class="col-lg-2">
              <div class="form-group">
                <label>From</label>
                <span *ngIf="validateOriginCity(i)">
                  <p style="color: red;font-size:7px;">please Fill up this field</p>
                </span>
                <ng-template #typeaheadItemTemplate let-model="item">
                  <div class="makeFlex hrtlCenter">
                    <div class="calc60">
                      <p class="font14 appendBottom5 blackText">{{model.City}}, {{model.Country}}</p>
                      <p class="font12 greyText appendBottom3"> {{model.Value}}</p>
                    </div>
                    <div class="pushRight font14 lightGreyText latoBold">{{model.Code}}</div>
                  </div>
                </ng-template>
                <input type="hidden" formControlName="OriginLocationCode" />
                <input type="hidden" formControlName="OriginLocation" />
                <input type="hidden" formControlName="OriginAirport" />
                <input type="hidden" formControlName="DestinationLocationCode" />
                <input type="hidden" formControlName="DestinationLocation" />
                <input type="hidden" formControlName="DestinationAirport" />
                <input type="hidden" formControlName="SequenceNumber" />

                <input (click)="setDestinationNull(i)" [customTypeahead]="data"
                  [typeaheadSearchFields]="['Code', 'Value','Country','City']"
                  [typeaheadItemTemplate]="typeaheadItemTemplate" isAnimated="true" typeaheadOptionField="City"
                  [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="4"
                  (typeaheadOnSelect)="onSelectDestination($event,i)" type="text" class="form-control"
                  formControlName="OriginCity"
                  value="{{searchResult.Results.SearchRequest.OriginDestinationInformation[0].OriginCity}}" name="From">
              </div>
            </div>
            <div class="col-lg-1">
              <div style="position: relative;">
                <span><i (click)="swap(this.destinationFlight,this.arrivalFlight,i)" style=" z-index: 9999;
                      color: #065af3;
                      position: absolute;
                      cursor: pointer;
                      width: 0px;
                      height: 0px;
                      top: 38px;
                      left: 5px;" class="flight icon-exchange"></i></span>

              </div>
            </div>

            <div class="col-lg-3">
              <div class="form-group">
                <label>To</label>
                <span *ngIf="validateDestinationCity(i)">
                  <p style="color: red;font-size:7px;">please Fill up this field</p>
                </span>
                <span *ngIf="FromToNotSame(i)">
                  <p style="color: red;font-size:7px;">From and To Airport can not be the same</p>
                </span>
                <input [customTypeahead]="data" [typeaheadSearchFields]="['Code', 'Value','Country','City']"
                  [typeaheadItemTemplate]="typeaheadItemTemplate" isAnimated="true" typeaheadOptionField="City"
                  [typeaheadScrollable]="true" [typeaheadOptionsInScrollableView]="4"
                  (typeaheadOnSelect)="onSelectArrival($event,i)" (click)="setArrivalNull(i)" type="text"
                  class="form-control" formControlName="DestinationCity"
                  value="{{searchResult.Results.SearchRequest.OriginDestinationInformation[0].DestinationCity}}"
                  name="To">
              </div>
            </div>
            <div class="col-lg-3">
              <div class="form-group">
                <label>Depart</label>
                <input (click)="d.toggle()" formControlName="DepartureDateTime" [displayMonths]="displayMonths"
                  [navigation]="navigation" [outsideDays]="outsideDays" [showWeekNumbers]="showWeekNumbers"
                  ngbDatepicker #d="ngbDatepicker" type="text" class="form-control"
                  value="{{searchResult.Results.SearchRequest.OriginDestinationInformation[0].DepartureDateTime}}">
              </div>
            </div>

            <div class="col-lg-3">
              <div class="form-group">
                <label>Return</label>
                <input *ngIf="searchForm.value.JourneyType==2||searchForm.value.JourneyType==3"
                  class="form-control dsb-input" (click)="d.toggle()" type="text" formControlName="ReturnDateTime"
                  class="form-control" [displayMonths]="displayMonths" [navigation]="navigation"
                  [outsideDays]="outsideDays" [showWeekNumbers]="showWeekNumbers" ngbDatepicker #d="ngbDatepicker"
                  value="{{searchResult.Results.SearchRequest.OriginDestinationInformation[0].ReturnDateTime}}">
              </div>
            </div>
          </div>
        </ng-container>
      </div>

      <div class="row col-lg-4">

        <div class="flight_passengerBox col-lg-6">
          <div id="BE_flight_paxInfoBox" class="pax-details ddn-parent flight_passengerBox">

            <div class="panel-dropdown">
              <a href="#" style="color: #518DC6;">TRAVELLERS & CLASS</a>
              <p id="traveller-summary" style="color: #fff;padding-top: 3px;">1 Traveller,Economy</p>

              <div class="panel-dropdown-content">
                <div class="row" style="margin-bottom:10px;">
                  <div class="col-7">
                    <label class="t-spinner-label">Adult</label>
                  </div>
                  <div class="col-5 no-letf-padding">

                    <input id="flt-people-adult" style="" class="t-spinner text-center" readonly="readonly" type="text"
                      value="1" name="Adults" formControlName="Adults">
                  </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                  <div class="col-7">
                    <label class="t-spinner-label">Child <span>2 - 12 yrs</span></label>
                  </div>
                  <div class="col-5 no-letf-padding">
                    <input id="flt-people-child" class="t-spinner text-center" readonly="readonly" type="text" value="0"
                      name="Children" formControlName="Children">
                  </div>
                </div>
                <div class="row" style="margin-bottom:10px;">
                  <div class="col-7">
                    <label class="t-spinner-label">Infant <span>Below 2 yrs</span></label>
                  </div>
                  <div class="col-5 no-letf-padding">
                    <input id="flt-people-infant" class="t-spinner text-center" readonly="readonly" type="text"
                      value="0" name="Infants" formControlName="Infants">
                  </div>
                </div>
                <hr style="margin: 0;" />
                <div class="row" style="margin-bottom:10px; margin-top:10px;">
                  <div class="col-6">
                    <div class="checkboxes float-left">
                      <label class="container_check"
                        style="color: #000;font-size: 1em;padding-top: 3px;font-weight: bold;">
                        Economy
                        <input type="radio" name="TravelClass" checked="checked" value="Economy" data-txt="Economy"
                          formControlName="TravelClass">
                        <span class="checkmark"></span>
                      </label>
                    </div>
                  </div>
                  <div class="col-6">
                    <div class="checkboxes float-left">
                      <label class="container_check"
                        style="color: #000;font-size: 1em;padding-top: 3px;font-weight: bold;">
                        Business
                        <input type="radio" name="TravelClass" value="Business" data-txt="Business"
                          formControlName="TravelClass">
                        <span class="checkmark"></span>
                      </label>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-6">
          <div style="margin-bottom: 31px;"></div>
          <input type="submit" class="btn btn-primary  widgetSearchBtn" value="SEARCH">
        </div>
      </div>
    </div>
  </form>
</div>



<div class="container" style="margin-top: 25px;margin-top: 25px; margin-bottom: 120px;">
  <div class="row">
    <div class="col-lg-2">
      <div class="row">
        <div class="col-lg-12" style="background: #518DC6;">
          <label class="dsb-label-color">Filter Search</label>
          
        </div>

      </div>
      <div class="row">
        <div class="col-lg-12">
            <h2 class="my-4">Airlines</h2>
            <div *ngFor="let group of uniqueAirlines" class="list-group">
             
            <a style="cursor: pointer;" (click)="searchByAirline(group.name)" class="list-group-item">{{group.name}}</a>
        </div>
         
         
          </div>
      </div>

    </div>
    <div class="col-lg-1">

    </div>

    <div class="col-lg-9">
      <div class="row" style="background: #518DC6;">
        <div class="col-lg-2">
          <label class="dsb-label-color">Sort By:</label>
        </div>
        <div class="col-lg-3">
          <label class="dsb-label-color">Departure</label>
        </div>
        <div class="col-lg-2">
          <label class="dsb-label-color">Duration</label>
        </div>
        <div class="col-lg-2">
          <label class="dsb-label-color">Arrival</label>
        </div>
        <div class="col-lg-3">
          <label class="dsb-label-color">Price</label>
        </div>
      </div>
      <ng-container *ngFor="let groupItinerary of searchResult.Results.AllGroupedIternaries; let i=index;">

        <div class="row" style="padding-top: 30px;">
          <div class="row col-lg-6" style="background: #E5E5E5;padding-left: 0px;">
            <div class="col-lg-2" style="padding-left: 0px;"> <img style="width: 44px;height:44px;"
                src="http://airlines.a4aero.com/images/{{groupItinerary.AirlineCode}}.png"></div>
            <div class="col-lg-10"><b>
                <p style="text-align: left;font-size: 20px;">{{groupItinerary.AirlineName}}</p>
              </b></div>


          </div>
          <div class="col-lg-4" style="background: #E5E5E5;">
            <h5 style="float: right;">{{groupItinerary.Currency}}{{groupItinerary.Price}}</h5>
          </div>
          <div class="col-lg-2" style="background: #E5E5E5;padding-right: 0px">
            <button class="btn btn-primary widgetSearchBtn" style="float: right;padding-bottom: 13px;">BOOK NOW</button>
          </div>

        </div>
        <div class="row">
          <ng-container
            *ngFor="let itinerary of searchResult.Results.AllGroupedIternaries[i].PricedIternaries; let j=index;">
          
              
              <div class="row col-lg-12">
                <span class="radio col-lg-2"><input type="radio" name="selectedDestination" [(ngModel)]="selectedDestination" [value]="itinerary.OriginDestinationOptions[0]" (change)="radioChangeHandler1()"></span>
                
                <div class="col-lg-3">
                  <h3>{{itinerary.OriginDestinationOptions[0].Takeoff | date:'HH:mm'}}</h3>
                  <p>{{itinerary.OriginDestinationOptions[0].Flights[0].DepartureCity}}</p>
                  <p>{{searchResult.Results.AllGroupedIternaries[i].PricedIternaries.length}}</p>
                </div>
                <div class="col-lg-4">
                  <p style="text-align: center">{{itinerary.OriginDestinationOptions[0].TotalJourneyTime | myTime}}</p>
                  <hr />
                  <p style="color: #4B8AC8; text-align: center">{{itinerary.OriginDestinationOptions[0].TotalStops}} Stop<span *ngIf="itinerary.OriginDestinationOptions[0].Flights.length > 1">,via {{itinerary.OriginDestinationOptions[0].Flights[0].ArrivalCity}}</span></p>
                </div>
                <div class="col-lg-3">
                  <h3>{{itinerary.OriginDestinationOptions[0].Arrival | date:'HH:mm'}}</h3>
                  <p>{{itinerary.OriginDestinationOptions[0].Flights[itinerary.OriginDestinationOptions[0].Flights.length-1].ArrivalCity}}</p>
                </div>
              </div>
            </ng-container>
            <ng-container
            *ngFor="let itinerary of searchResult.Results.AllGroupedIternaries[i].PricedIternaries; let j=index;">
              <div *ngIf="searchResult.Results.SearchRequest.JourneyType==2" class="row col-lg-12" style="background: #f9f9f9;">
                <span class="col-lg-2"><input type="radio" name="selectedReturn" [(ngModel)]="selectedReturn" [value]="itinerary.OriginDestinationOptions[1]" (change)="radioChangeHandler2()"></span>
                
                <div class="col-lg-3">
                  <h3>{{itinerary.OriginDestinationOptions[1].Takeoff | date:'HH:mm'}}</h3>
                  <p>{{itinerary.OriginDestinationOptions[1].Flights[0].DepartureCity}}</p>
                </div>
                <div class="col-lg-4">
                  <p style="text-align: center">{{itinerary.OriginDestinationOptions[1].TotalJourneyTime | myTime}}</p>
                  <hr />
                  <p style="color: #4B8AC8; text-align: center">{{itinerary.OriginDestinationOptions[1].TotalStops}} Stop<span *ngIf="itinerary.OriginDestinationOptions[1].Flights.length > 1">,via {{itinerary.OriginDestinationOptions[1].Flights[0].ArrivalCity}}</span></p>
                </div>
                <div class="col-lg-3">
                  <h3>{{itinerary.OriginDestinationOptions[1].Arrival | date:'HH:mm'}}</h3>
                  <p>{{itinerary.OriginDestinationOptions[1].Flights[itinerary.OriginDestinationOptions[1].Flights.length-1].ArrivalCity}}</p>
                </div>
              </div>


            </ng-container>
         
        </div>



        <div class="row" style="border-top: 1px solid #ddd;">
          <div class="col-lg-3">
            <a><i class="flight icon-flight"></i> Itinerary</a>
          </div>
          <div class="col-lg-3">
            <a><i class="flight icon-box"></i>Fare Details</a>
          </div>
          <div class="col-lg-3">
            <a><i class="flight icon-tag-3"></i>Fare Rules</a>
          </div>
          <div class="col-lg-3">
            <a><i class="flight icon-bag"></i>Baggage Info</a>
          </div>

        </div>
      </ng-container>
    </div>

  </div>

</div>